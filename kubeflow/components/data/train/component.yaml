name: Build Train Dataset
description: Queries over GA data to extract customers, their searches and the context at which they browsed the site.

inputs:
  - {name: train_init_date, type: String, description: 'Date to start querying from train dataset. Follows %Y%M%D format.'}
  - {name: train_end_date, type: String, description: 'Date to end querying from train dataset. Follows %Y%M%D format.'}
  - {name: bucket, type: String}
  - {name: es_host, type: String, description: 'Hostname of Elasticsearch.'}
  - {name: model_name, type: String, description: 'Name of feature store saved in Elasticsearch.'}

outputs:
  - {name: destination, type: LocalPath, description: 'Path where train dataset is located.'}

implementation:
  container:
    image: gcr.io/{PROJECT_ID}/data_train
    args: [
      --train_init_date, {inputValue: train_init_date},
      --train_end_date, {inputValue: train_end_date},
      --bucket, {inputValue: bucket},
      --es_host, {inputValue: es_host},
      --model_name, {inputValue: model_name},
      --destination, {outputPath: destination}
    ]
